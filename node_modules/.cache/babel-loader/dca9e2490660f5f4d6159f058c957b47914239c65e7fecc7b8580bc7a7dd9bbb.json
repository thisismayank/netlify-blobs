{"ast":null,"code":"var _jsxFileName = \"/Users/mayanka/Workspace/netlify-image-cdn/src/Components/imagemanager.component.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ImageManager() {\n  _s();\n  const [file, setFile] = useState(null);\n  const [images, setImages] = useState([]);\n  const [stores, setStores] = useState([]);\n  const [selectedStore, setSelectedStore] = useState(\"\");\n  useEffect(() => {\n    fetchStores();\n  }, []);\n  const fetchStores = async () => {\n    try {\n      const response = await fetch(\"/.netlify/functions/listStores\");\n      if (response.ok) {\n        const data = await response.json();\n        setStores(data);\n        if (data.length > 0) {\n          setSelectedStore(data[0]); // Set the first store as default selected\n          fetchImages(); // Optionally fetch images immediately upon selecting a store\n        }\n      } else {\n        console.error(\"Failed to fetch stores\");\n      }\n    } catch (error) {\n      console.error(\"Error fetching stores:\", error);\n    }\n  };\n  const fetchImages = async () => {\n    if (!selectedStore) return;\n    try {\n      const response = await fetch(`/.netlify/functions/listBlobs?store=${encodeURIComponent(selectedStore)}`);\n      if (response.ok) {\n        const data = await response.json();\n        setImages(data);\n      } else {\n        console.error(\"Failed to fetch images\");\n      }\n    } catch (error) {\n      console.error(\"Error fetching images:\", error);\n    }\n  };\n  const handleUpload = async () => {\n    if (!file || !selectedStore) {\n      alert(\"Please select a file and a store first!\");\n      return;\n    }\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    formData.append(\"store\", selectedStore);\n    try {\n      const response = await fetch(\"/.netlify/functions/uploadImage\", {\n        method: \"POST\",\n        body: formData\n      });\n      if (response.ok) {\n        const data = await response.json();\n        alert(\"Upload Successful!\");\n        fetchImages(); // Refresh images after upload\n      } else {\n        const error = await response.json();\n        alert(`Upload failed: ${error.message}`);\n      }\n    } catch (error) {\n      alert(\"Upload failed:\", error.message);\n    }\n  };\n  const deleteImage = async key => {\n    if (!selectedStore) return;\n    try {\n      const response = await fetch(`/.netlify/functions/deleteBlob?key=${encodeURIComponent(key)}&store=${encodeURIComponent(selectedStore)}`, {\n        method: \"DELETE\"\n      });\n      if (response.ok) {\n        alert(\"Image deleted successfully\");\n        fetchImages(); // Refresh images after deletion\n      } else {\n        alert(\"Failed to delete image\");\n      }\n    } catch (error) {\n      alert(\"Error deleting image:\", error);\n    }\n  };\n  const handleStoreChange = e => {\n    setSelectedStore(e.target.value);\n    fetchImages();\n  };\n  const handleFileChange = event => {\n    setFile(event.target.files[0]);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Upload and Manage Images\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      onChange: handleStoreChange,\n      value: selectedStore,\n      children: stores.map((store, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n        value: store,\n        children: store\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: fetchImages,\n      children: \"Fetch Images\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      onChange: handleFileChange,\n      accept: \"image/*\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleUpload,\n      children: \"Upload Image\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Uploaded Images in \", selectedStore]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), images.length > 0 ? images.map((image, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: `data:image/jpeg;base64,${image.data}`,\n          alt: image.metadata.filename,\n          style: {\n            width: \"100px\",\n            height: \"auto\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Filename: \", image.metadata.filename]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"MIME type: \", image.metadata.mimetype]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => deleteImage(image.key),\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 15\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 13\n      }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No images to display.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 5\n  }, this);\n}\n_s(ImageManager, \"KTZ7fXM4aJ6cJ0sA9vVocE48BTk=\");\n_c = ImageManager;\nexport default ImageManager;\nvar _c;\n$RefreshReg$(_c, \"ImageManager\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","ImageManager","_s","file","setFile","images","setImages","stores","setStores","selectedStore","setSelectedStore","fetchStores","response","fetch","ok","data","json","length","fetchImages","console","error","encodeURIComponent","handleUpload","alert","formData","FormData","append","method","body","message","deleteImage","key","handleStoreChange","e","target","value","handleFileChange","event","files","children","fileName","_jsxFileName","lineNumber","columnNumber","onChange","map","store","index","onClick","type","accept","image","src","alt","metadata","filename","style","width","height","mimetype","_c","$RefreshReg$"],"sources":["/Users/mayanka/Workspace/netlify-image-cdn/src/Components/imagemanager.component.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nfunction ImageManager() {\n  const [file, setFile] = useState(null);\n  const [images, setImages] = useState([]);\n  const [stores, setStores] = useState([]);\n  const [selectedStore, setSelectedStore] = useState(\"\");\n\n  useEffect(() => {\n    fetchStores();\n  }, []);\n\n  const fetchStores = async () => {\n    try {\n      const response = await fetch(\"/.netlify/functions/listStores\");\n      if (response.ok) {\n        const data = await response.json();\n        setStores(data);\n        if (data.length > 0) {\n          setSelectedStore(data[0]); // Set the first store as default selected\n          fetchImages(); // Optionally fetch images immediately upon selecting a store\n        }\n      } else {\n        console.error(\"Failed to fetch stores\");\n      }\n    } catch (error) {\n      console.error(\"Error fetching stores:\", error);\n    }\n  };\n\n  const fetchImages = async () => {\n    if (!selectedStore) return;\n    try {\n      const response = await fetch(\n        `/.netlify/functions/listBlobs?store=${encodeURIComponent(\n          selectedStore\n        )}`\n      );\n      if (response.ok) {\n        const data = await response.json();\n        setImages(data);\n      } else {\n        console.error(\"Failed to fetch images\");\n      }\n    } catch (error) {\n      console.error(\"Error fetching images:\", error);\n    }\n  };\n\n  const handleUpload = async () => {\n    if (!file || !selectedStore) {\n      alert(\"Please select a file and a store first!\");\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    formData.append(\"store\", selectedStore);\n\n    try {\n      const response = await fetch(\"/.netlify/functions/uploadImage\", {\n        method: \"POST\",\n        body: formData,\n      });\n      if (response.ok) {\n        const data = await response.json();\n        alert(\"Upload Successful!\");\n        fetchImages(); // Refresh images after upload\n      } else {\n        const error = await response.json();\n        alert(`Upload failed: ${error.message}`);\n      }\n    } catch (error) {\n      alert(\"Upload failed:\", error.message);\n    }\n  };\n\n  const deleteImage = async (key) => {\n    if (!selectedStore) return;\n    try {\n      const response = await fetch(\n        `/.netlify/functions/deleteBlob?key=${encodeURIComponent(\n          key\n        )}&store=${encodeURIComponent(selectedStore)}`,\n        { method: \"DELETE\" }\n      );\n      if (response.ok) {\n        alert(\"Image deleted successfully\");\n        fetchImages(); // Refresh images after deletion\n      } else {\n        alert(\"Failed to delete image\");\n      }\n    } catch (error) {\n      alert(\"Error deleting image:\", error);\n    }\n  };\n\n  const handleStoreChange = (e) => {\n    setSelectedStore(e.target.value);\n    fetchImages();\n  };\n\n  const handleFileChange = (event) => {\n    setFile(event.target.files[0]);\n  };\n\n  return (\n    <div>\n      <h2>Upload and Manage Images</h2>\n      <select onChange={handleStoreChange} value={selectedStore}>\n        {stores.map((store, index) => (\n          <option key={index} value={store}>\n            {store}\n          </option>\n        ))}\n      </select>\n      <button onClick={fetchImages}>Fetch Images</button>\n      <input type=\"file\" onChange={handleFileChange} accept=\"image/*\" />\n      <button onClick={handleUpload}>Upload Image</button>\n      <div>\n        <h3>Uploaded Images in {selectedStore}</h3>\n        {images.length > 0 ? (\n          images.map((image, index) => (\n            <div key={index}>\n              <img\n                src={`data:image/jpeg;base64,${image.data}`}\n                alt={image.metadata.filename}\n                style={{ width: \"100px\", height: \"auto\" }}\n              />\n              <p>Filename: {image.metadata.filename}</p>\n              <p>MIME type: {image.metadata.mimetype}</p>\n              <button onClick={() => deleteImage(image.key)}>Delete</button>\n            </div>\n          ))\n        ) : (\n          <p>No images to display.</p>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default ImageManager;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}