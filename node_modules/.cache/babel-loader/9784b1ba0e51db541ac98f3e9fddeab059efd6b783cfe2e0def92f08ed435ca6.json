{"ast":null,"code":"var _jsxFileName = \"/Users/mayanka/Workspace/netlify-image-cdn/src/Components/imagemanager.component.js\",\n  _s = $RefreshSig$();\n// src/components/ImageManager.js\nimport React, { useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ImageManager() {\n  _s();\n  const [file, setFile] = useState(null);\n  const [images, setImages] = useState([]);\n  useEffect(() => {\n    fetchImages();\n  }, []);\n  const handleFileChange = event => {\n    setFile(event.target.files[0]);\n  };\n  const handleUpload = async () => {\n    if (!file) {\n      alert(\"Please select a file first!\");\n      return;\n    }\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    try {\n      const response = await fetch(\"/.netlify/functions/uploadImage\", {\n        method: \"POST\",\n        body: formData\n      });\n      if (response.ok) {\n        const data = await response.json();\n        console.log(\"response\", data);\n        alert(\"Upload Successful!\");\n        fetchImages(data.key); // Fetch the latest images list including the new upload\n      } else {\n        const error = await response.json();\n        alert(`Upload failed: ${error.message}`);\n      }\n    } catch (error) {\n      alert(\"Upload failed:\", error.message);\n    }\n  };\n  const fetchImages = async key => {\n    console.log(\"fetch image key\", key);\n    const response = await fetch(`/.netlify/functions/getImage?key=${encodeURIComponent(key)}`);\n    if (response.ok) {\n      const data = await response.json();\n      setImages(data.images || []);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Upload and Manage Images\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      onChange: handleFileChange,\n      accept: \"image/*\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleUpload,\n      children: \"Upload Image\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Uploaded Images\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), images.length > 0 ? images.map((image, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: `data:image/jpeg;base64,${image.data}`,\n          alt: image.metadata.filename,\n          style: {\n            width: \"100px\",\n            height: \"auto\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Filename: \", image.metadata.filename]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"MIME type: \", image.metadata.mimetype]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 15\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No images to display.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n}\n_s(ImageManager, \"4n0TPqNawjfRs1acd435vE6OFnY=\");\n_c = ImageManager;\nexport default ImageManager;\nvar _c;\n$RefreshReg$(_c, \"ImageManager\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","ImageManager","_s","file","setFile","images","setImages","fetchImages","handleFileChange","event","target","files","handleUpload","alert","formData","FormData","append","response","fetch","method","body","ok","data","json","console","log","key","error","message","encodeURIComponent","children","fileName","_jsxFileName","lineNumber","columnNumber","type","onChange","accept","onClick","length","map","image","index","src","alt","metadata","filename","style","width","height","mimetype","_c","$RefreshReg$"],"sources":["/Users/mayanka/Workspace/netlify-image-cdn/src/Components/imagemanager.component.js"],"sourcesContent":["// src/components/ImageManager.js\nimport React, { useState, useEffect } from \"react\";\n\nfunction ImageManager() {\n  const [file, setFile] = useState(null);\n  const [images, setImages] = useState([]);\n\n  useEffect(() => {\n    fetchImages();\n  }, []);\n\n  const handleFileChange = (event) => {\n    setFile(event.target.files[0]);\n  };\n\n  const handleUpload = async () => {\n    if (!file) {\n      alert(\"Please select a file first!\");\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append(\"file\", file);\n\n    try {\n      const response = await fetch(\"/.netlify/functions/uploadImage\", {\n        method: \"POST\",\n        body: formData,\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        console.log(\"response\", data);\n        alert(\"Upload Successful!\");\n        fetchImages(data.key); // Fetch the latest images list including the new upload\n      } else {\n        const error = await response.json();\n        alert(`Upload failed: ${error.message}`);\n      }\n    } catch (error) {\n      alert(\"Upload failed:\", error.message);\n    }\n  };\n\n  const fetchImages = async (key) => {\n    console.log(\"fetch image key\", key);\n    const response = await fetch(\n      `/.netlify/functions/getImage?key=${encodeURIComponent(key)}`\n    );\n    if (response.ok) {\n      const data = await response.json();\n      setImages(data.images || []);\n    }\n  };\n\n  return (\n    <div>\n      <h2>Upload and Manage Images</h2>\n      <input type=\"file\" onChange={handleFileChange} accept=\"image/*\" />\n      <button onClick={handleUpload}>Upload Image</button>\n      <div>\n        <h3>Uploaded Images</h3>\n        {images.length > 0 ? (\n          images.map((image, index) => (\n            <div key={index}>\n              <img\n                src={`data:image/jpeg;base64,${image.data}`}\n                alt={image.metadata.filename}\n                style={{ width: \"100px\", height: \"auto\" }}\n              />\n              <p>Filename: {image.metadata.filename}</p>\n              <p>MIME type: {image.metadata.mimetype}</p>\n            </div>\n          ))\n        ) : (\n          <p>No images to display.</p>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default ImageManager;\n"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEnD,SAASC,YAAYA,CAAA,EAAG;EAAAC,EAAA;EACtB,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGP,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM,CAACQ,MAAM,EAAEC,SAAS,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EAExCC,SAAS,CAAC,MAAM;IACdS,WAAW,CAAC,CAAC;EACf,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,gBAAgB,GAAIC,KAAK,IAAK;IAClCL,OAAO,CAACK,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC;EAChC,CAAC;EAED,MAAMC,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAI,CAACT,IAAI,EAAE;MACTU,KAAK,CAAC,6BAA6B,CAAC;MACpC;IACF;IAEA,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEb,IAAI,CAAC;IAE7B,IAAI;MACF,MAAMc,QAAQ,GAAG,MAAMC,KAAK,CAAC,iCAAiC,EAAE;QAC9DC,MAAM,EAAE,MAAM;QACdC,IAAI,EAAEN;MACR,CAAC,CAAC;MAEF,IAAIG,QAAQ,CAACI,EAAE,EAAE;QACf,MAAMC,IAAI,GAAG,MAAML,QAAQ,CAACM,IAAI,CAAC,CAAC;QAClCC,OAAO,CAACC,GAAG,CAAC,UAAU,EAAEH,IAAI,CAAC;QAC7BT,KAAK,CAAC,oBAAoB,CAAC;QAC3BN,WAAW,CAACe,IAAI,CAACI,GAAG,CAAC,CAAC,CAAC;MACzB,CAAC,MAAM;QACL,MAAMC,KAAK,GAAG,MAAMV,QAAQ,CAACM,IAAI,CAAC,CAAC;QACnCV,KAAK,CAAE,kBAAiBc,KAAK,CAACC,OAAQ,EAAC,CAAC;MAC1C;IACF,CAAC,CAAC,OAAOD,KAAK,EAAE;MACdd,KAAK,CAAC,gBAAgB,EAAEc,KAAK,CAACC,OAAO,CAAC;IACxC;EACF,CAAC;EAED,MAAMrB,WAAW,GAAG,MAAOmB,GAAG,IAAK;IACjCF,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEC,GAAG,CAAC;IACnC,MAAMT,QAAQ,GAAG,MAAMC,KAAK,CACzB,oCAAmCW,kBAAkB,CAACH,GAAG,CAAE,EAC9D,CAAC;IACD,IAAIT,QAAQ,CAACI,EAAE,EAAE;MACf,MAAMC,IAAI,GAAG,MAAML,QAAQ,CAACM,IAAI,CAAC,CAAC;MAClCjB,SAAS,CAACgB,IAAI,CAACjB,MAAM,IAAI,EAAE,CAAC;IAC9B;EACF,CAAC;EAED,oBACEL,OAAA;IAAA8B,QAAA,gBACE9B,OAAA;MAAA8B,QAAA,EAAI;IAAwB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eACjClC,OAAA;MAAOmC,IAAI,EAAC,MAAM;MAACC,QAAQ,EAAE5B,gBAAiB;MAAC6B,MAAM,EAAC;IAAS;MAAAN,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAClElC,OAAA;MAAQsC,OAAO,EAAE1B,YAAa;MAAAkB,QAAA,EAAC;IAAY;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,eACpDlC,OAAA;MAAA8B,QAAA,gBACE9B,OAAA;QAAA8B,QAAA,EAAI;MAAe;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,EACvB7B,MAAM,CAACkC,MAAM,GAAG,CAAC,GAChBlC,MAAM,CAACmC,GAAG,CAAC,CAACC,KAAK,EAAEC,KAAK,kBACtB1C,OAAA;QAAA8B,QAAA,gBACE9B,OAAA;UACE2C,GAAG,EAAG,0BAAyBF,KAAK,CAACnB,IAAK,EAAE;UAC5CsB,GAAG,EAAEH,KAAK,CAACI,QAAQ,CAACC,QAAS;UAC7BC,KAAK,EAAE;YAAEC,KAAK,EAAE,OAAO;YAAEC,MAAM,EAAE;UAAO;QAAE;UAAAlB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC3C,CAAC,eACFlC,OAAA;UAAA8B,QAAA,GAAG,YAAU,EAACW,KAAK,CAACI,QAAQ,CAACC,QAAQ;QAAA;UAAAf,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAC1ClC,OAAA;UAAA8B,QAAA,GAAG,aAAW,EAACW,KAAK,CAACI,QAAQ,CAACK,QAAQ;QAAA;UAAAnB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC;MAAA,GAPnCQ,KAAK;QAAAX,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAQV,CACN,CAAC,gBAEFlC,OAAA;QAAA8B,QAAA,EAAG;MAAqB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAC5B;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAAChC,EAAA,CA7EQD,YAAY;AAAAkD,EAAA,GAAZlD,YAAY;AA+ErB,eAAeA,YAAY;AAAC,IAAAkD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}